<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AMCARES - Organ Donation Awareness</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .smooth-scroll {
      scroll-behavior: smooth;
    }
    .hero-bg {
      background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1576091160550-2173dba999ef');
      background-size: cover;
      background-position: center;
      animation: heroFade 10s infinite alternate;
    }
    @keyframes heroFade {
      0% { background-position: center top; }
      100% { background-position: center bottom; }
    }
    .fade-in {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }
    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .scale-hover {
      transition: transform 0.3s ease;
    }
    .scale-hover:hover {
      transform: scale(1.05);
    }
    .dropdown:hover .dropdown-menu {
      display: block;
    }
    .carousel-slide {
      transition: transform 0.5s ease-in-out;
    }
    .accordion-item {
      transition: all 0.3s ease;
    }
    #chatbot {
      transition: transform 0.3s ease-in-out;
    }
    #chatbot.hidden {
      transform: translateX(100%);
    }
    .error {
      border-color: red !important;
    }
    .error-message {
      color: red;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
    .input-focus {
      transition: all 0.3s ease;
    }
    .input-focus:focus {
      transform: scale(1.02);
      box-shadow: 0 0 10px rgba(37, 99, 235, 0.3);
    }
    .form-message {
      transition: opacity 0.5s ease, transform 0.5s ease;
      opacity: 0;
      transform: translateY(10px);
    }
    .form-message.show {
      opacity: 1;
      transform: translateY(0);
    }
    .spinner {
      border: 2px solid #f3f3f3;
      border-top: 2px solid #2563eb;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      display: inline-block;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .typing-indicator {
      display: flex;
      gap: 5px;
      padding: 10px;
    }
    .typing-dot {
      width: 8px;
      height: 8px;
      background-color: #2563eb;
      border-radius: 50%;
      animation: bounce 1.2s infinite;
    }
    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
  </style>
</head>
<body class="bg-gray-50 smooth-scroll">
  <!-- AI Chatbot -->
  <div id="chatbot" class="fixed top-20 right-0 w-80 bg-white rounded-l-lg shadow-lg z-20 h-[calc(100vh-5rem)] hidden" aria-hidden="true">
    <div class="bg-blue-600 text-white p-4 rounded-tl-lg flex justify-between items-center">
      <h3 class="text-lg font-semibold">AMCARES Assistant</h3>
      <button id="chatbot-clear" class="text-white hover:text-gray-200" aria-label="Clear chat">
        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <div id="chatbot-messages" class="p-4 h-[calc(100%-8rem)] overflow-y-auto"></div>
    <div class="p-4 border-t flex items-center space-x-2">
      <input id="chatbot-input" type="text" placeholder="Ask about AMCARES..." class="flex-grow border rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" aria-label="Chatbot input">
      <button id="chatbot-send" class="bg-blue-600 text-white px-3 py-2 rounded-md hover:bg-blue-700" aria-label="Send message">Send</button>
    </div>
  </div>
  <button id="chatbot-toggle" class="fixed bottom-6 right-0 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition z-20" aria-label="Toggle chatbot">
    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8H7a2 2 0 01-2-2V6a2 2 0 012-2h6c4.418 0 8 3.582 8 8z" />
    </svg>
  </button>

  <!-- Navbar -->
  <nav class="bg-blue-600 text-white fixed w-full z-10 shadow-md" role="navigation">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <h1 class="text-2xl font-bold">AMCARES</h1>
        </div>
        <div class="hidden md:flex items-center space-x-8">
          <a href="#home" class="hover:text-blue-200" aria-label="Home">Home</a>
          <a href="#about" class="hover:text-blue-200" aria-label="About">About</a>
          <div class="relative dropdown">
            <a href="#organ-donation" class="hover:text-blue-200" aria-label="Organ Donation" role="button" aria-haspopup="true" aria-expanded="false">Organ Donation</a>
            <div class="dropdown-menu hidden absolute bg-blue-600 text-white mt-2 rounded-md shadow-lg">
              <a href="#faqs" class="block px-4 py-2 hover:bg-blue-700" aria-label="FAQs">FAQs</a>
              <a href="#myths-facts" class="block px-4 py-2 hover:bg-blue-700" aria-label="Myths & Facts">Myths & Facts</a>
              <a href="#signup-process" class="block px-4 py-2 hover:bg-blue-700" aria-label="Sign Up Process">Sign Up Process</a>
              <a href="#types-donation" class="block px-4 py-2 hover:bg-blue-700" aria-label="Types of Donation">Types of Donation</a>
            </div>
          </div>
          <div class="relative dropdown">
            <a href="#register" class="hover:text-blue-200" aria-label="Register" role="button" aria-haspopup="true" aria-expanded="false">Register</a>
            <div class="dropdown-menu hidden absolute bg-blue-600 text-white mt-2 rounded-md shadow-lg">
              <a href="#register-donor" class="block px-4 py-2 hover:bg-blue-700" aria-label="Register as a Donor">As a Donor</a>
              <a href="#register-volunteer" class="block px-4 py-2 hover:bg-blue-700" aria-label="Register as a Volunteer">As a Volunteer</a>
            </div>
          </div>
          <a href="#report-upload" class="hover:text-blue-200" aria-label="Upload Report">Upload Report</a>
          <a href="#hospitals" class="hover:text-blue-200" aria-label="Hospitals">Hospitals</a>
          <a href="#law" class="hover:text-blue-200" aria-label="Law">Law</a>
          <a href="#contact" class="hover:text-blue-200" aria-label="Contact">Contact</a>
          <a href="#my-story" onclick="showModal('personal-story'); return false;" class="hover:text-blue-200" aria-label="My Story">My Story</a>
        </div>
        <div class="md:hidden flex items-center">
          <button id="menu-toggle" class="text-white hover:text-blue-200 focus:outline-none" aria-label="Toggle menu" aria-expanded="false">
            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
            </svg>
          </button>
        </div>
      </div>
    </div>
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden bg-blue-600">
      <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
        <a href="#home" class="block text-white hover:text-blue-200 px-3 py-2" aria-label="Home">Home</a>
        <a href="#about" class="block text-white hover:text-blue-200 px-3 py-2" aria-label="About">About</a>
        <a href="#organ-donation" class="block text-white hover:text-blue-200 px-3 py-2" aria-label="Organ Donation">Organ Donation</a>
        <a href="#faqs" class="block text-white hover:text-blue-200 px-3 py-2 pl-6" aria-label="FAQs">FAQs</a>
        <a href="#myths-facts" class="block text-white hover:text-blue-200 px-3 py-2 pl-6" aria-label="Myths & Facts">Myths & Facts</a>
        <a href="#signup-process" class="block text-white hover:text-blue-200 px-3 py-2 pl-6" aria-label="Sign Up Process">Sign Up Process</a>
        <a href="#types-donation" class="block text-white hover:text-blue-200 px-3 py-2 pl-6" aria-label="Types of Donation">Types of Donation</a>
        <a href="#register" class="block text-white hover:text-blue-200 px-3 py-2" aria-label="Register">Register</a>
        <a href="#register-donor" class="block text-white hover:text-blue-200 px-3 py-2 pl-6" aria-label="Register as a Donor">As a Donor</a>
        <a href="#register-volunteer" class="block text-white hover:text-blue-200 px-3 py-2 pl-6" aria-label="Register as a Volunteer">As a Volunteer</a>
        <a href="#report-upload" class="block text-white hover:text-blue-200 px-3 py-2" aria-label="Upload Report">Upload Report</a>
        <a href="#hospitals" class="block text-white hover:text-blue-200 px-3 py-2" aria-label="Hospitals">Hospitals</a>
        <a href="#law" class="block text-white hover:text-blue-200 px-3 py-2" aria-label="Law">Law</a>
        <a href="#contact" class="block text-white hover:text-blue-200 px-3 py-2" aria-label="Contact">Contact</a>
        <a href="#my-story" onclick="showModal('personal-story'); return false;" class="block text-white hover:text-blue-200 px-3 py-2" aria-label="My Story">My Story</a>
      </div>
    </div>
  </nav>

  <!-- Personalization Prompt -->
  <div id="personalization-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" role="dialog" aria-modal="true" aria-labelledby="personalization-title">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-md w-full relative">
      <div class="flex justify-between items-center mb-4">
        <h3 id="personalization-title" class="text-xl font-semibold">Welcome to AMCARES!</h3>
        <button id="personalization-close" class="text-gray-600 hover:text-gray-800" aria-label="Close modal">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <p class="text-gray-600 mb-4">What are you interested in?</p>
      <div class="space-y-2">
        <button onclick="personalize('donor')" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700" aria-label="Becoming a Donor">Becoming a Donor</button>
        <button onclick="personalize('volunteer')" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700" aria-label="Volunteering">Volunteering</button>
        <button onclick="personalize('recipient')" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700" aria-label="Learning as a Recipient">Learning as a Recipient</button>
      </div>
    </div>
  </div>

  <!-- Organ Donation Modal -->
  <div id="organ-donation-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-4">
        <h3 id="modal-title" class="text-2xl font-semibold text-blue-600"></h3>
        <button id="modal-close" class="text-gray-600 hover:text-gray-800" aria-label="Close modal">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div id="modal-content"></div>
    </div>
  </div>

  <!-- Personal Story Modal -->
  <div id="personal-story-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" role="dialog" aria-modal="true" aria-labelledby="personal-story-title">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-4">
        <h3 id="personal-story-title" class="text-2xl font-semibold text-blue-600">My Story</h3>
        <button id="personal-story-close" class="text-gray-600 hover:text-gray-800" aria-label="Close modal">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div id="personal-story-content"></div>
    </div>
  </div>

  <!-- All Stories Modal -->
  <div id="all-stories-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" role="dialog" aria-modal="true" aria-labelledby="all-stories-title">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-4">
        <h3 id="all-stories-title" class="text-2xl font-semibold text-blue-600">All Stories</h3>
        <button id="all-stories-close" class="text-gray-600 hover:text-gray-800" aria-label="Close modal">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div id="all-stories-content"></div>
      <div class="flex justify-between mt-4">
        <button id="stories-prev" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700" aria-label="Previous page">Previous</button>
        <button id="stories-next" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700" aria-label="Next page">Next</button>
      </div>
    </div>
  </div>

  <!-- Hero Section -->
  <section id="home" class="hero-bg h-screen flex items-center justify-center text-center text-white">
    <div class="max-w-4xl mx-auto px-4 fade-in">
      <h2 class="text-4xl md:text-6xl font-bold mb-4">Give the Gift of Life</h2>
      <p class="text-lg md:text-xl mb-6">AMCARES promotes organ medical awareness to save lives and transform communities.</p>
      <a href="#register" class="bg-blue-600 text-white px-8 py-3 rounded-full hover:bg-blue-700 transition scale-hover" aria-label="Register Now">Register Now</a>
    </div>
  </section>

  <!-- Statistics Section -->
  <section id="stats" class="py-16 bg-blue-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center text-gray-800 mb-12 fade-in">Our Impact</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="text-center fade-in">
          <h3 class="text-4xl font-bold text-blue-600 mb-2">10</h3>
          <p class="text-gray-600">Lives Saved</p>
        </div>
        <div class="text-center fade-in">
          <h3 class="text-4xl font-bold text-blue-600 mb-2">50</h3>
          <p class="text-gray-600">Donors Registered</p>
        </div>
        <div class="text-center fade-in">
          <h3 class="text-4xl font-bold text-blue-600 mb-2">10</h3>
          <p class="text-gray-600">Transplants Facilitated</p>
        </div>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center text-gray-800 mb-12 fade-in">About AMCARES</h2>
      <div class="fade-in text-center">
        <p class="text-gray-600 mb-4 max-w-2xl mx-auto">AMCARES is a transformative healthtech startup founded by Shreya Srivastava, a dedicated software developer and technical enthusiast whose personal journey as a liver donor inspired a mission to revolutionize healthcare. In 2018, Shreya donated 75% of her liver to save her father’s life, an experience that exposed her to the challenges of organ transplantation and the pervasive myths surrounding medical care. Driven by this, AMCARES was established to provide accurate, accessible medical guidance, debunk misconceptions, and support individuals navigating organ transplants. By leveraging cutting-edge technology and a compassionate approach, AMCARES empowers users with reliable information and resources, fostering a healthier, more informed world.</p>
        <p class="text-gray-600 max-w-2xl mx-auto">AMCARES is built on the mission to empower individuals with accurate, accessible, and compassionate healthcare guidance. The startup aims to break down barriers to medical information, dispel myths, and foster a supportive ecosystem for patients, families, and healthcare providers. Its vision is to create a world where no one is hindered by misinformation or lack of resources when making critical health decisions, particularly in the context of organ transplantation.</p>
      </div>
    </div>
  </section>

  <!-- Organ Donation Section -->
  <section id="organ-donation" class="py-16 bg-blue-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center text-gray-800 mb-12 fade-in">Organ Donation</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-12 fade-in">
        <button onclick="showModal('faqs')" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition scale-hover" aria-label="FAQs">FAQs</button>
        <button onclick="showModal('myths-facts')" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition scale-hover" aria-label="Myths & Facts">Myths & Facts</button>
        <button onclick="showModal('signup-process')" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition scale-hover" aria-label="Sign Up Process">Sign Up Process</button>
        <button onclick="showModal('types-donation')" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition scale-hover" aria-label="Types of Donation">Types of Donation</button>
      </div>
    </div>
  </section>

  <!-- Register Section -->
  <section id="register" class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center text-gray-800 mb-12 fade-in">Register Today</h2>
      <div id="register-donor" class="fade-in">
        <h3 class="text-2xl font-semibold text-blue-600 mb-6 text-center">Register as a Donor or Volunteer</h3>
        <div id="register-form" class="max-w-lg mx-auto space-y-6 bg-blue-50 p-6 sm:p-8 rounded-lg shadow-md">
          <div>
            <label for="reg-name" class="block text-sm font-medium text-gray-700">Full Name</label>
            <input type="text" id="reg-name" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required aria-describedby="reg-name-error">
            <p id="reg-name-error" class="error-message hidden"></p>
          </div>
          <div>
            <label for="reg-email" class="block text-sm font-medium text-gray-700">Email</label>
            <input type="email" id="reg-email" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required aria-describedby="reg-email-error">
            <p id="reg-email-error" class="error-message hidden"></p>
          </div>
          <div>
            <label for="reg-type" class="block text-sm font-medium text-gray-700">Register As</label>
            <select id="reg-type" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required aria-describedby="reg-type-error">
              <option value="donor">Donor</option>
              <option value="volunteer">Volunteer</option>
            </select>
            <p id="reg-type-error" class="error-message hidden"></p>
          </div>
          <div>
            <label for="reg-consent" class="flex items-center">
              <input type="checkbox" id="reg-consent" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" aria-describedby="reg-consent-error">
              <span class="ml-2 text-sm text-gray-600">I consent to organ donation (for donors)</span>
            </label>
            <p id="reg-consent-error" class="error-message hidden"></p>
          </div>
          <div class="relative pt-2">
            <div class="absolute inset-0 flex items-center">
              <div id="progress-bar" class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="progress" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
              </div>
            </div>
          </div>
          <div>
            <button id="reg-submit" type="button" class="w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition scale-hover flex items-center justify-center" aria-label="Submit Registration">
              <span id="reg-submit-text">Submit Registration</span>
              <span id="reg-submit-spinner" class="spinner hidden"></span>
            </button>
          </div>
        </div>
        <p id="reg-message" class="mt-4 text-center text-blue-600 hidden"></p>
      </div>
    </div>
  </section>

  <!-- Report Upload Section -->
  <section id="report-upload" class="py-16 bg-blue-50">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center text-gray-800 mb-8 fade-in">Upload Your Medical Report</h2>
      <div class="fade-in max-w-lg mx-auto">
        <div id="report-form" class="space-y-6 bg-white p-6 sm:p-8 rounded-lg shadow-md">
          <div>
            <label for="report-file" class="block text-sm font-medium text-gray-700">Select Medical Report (PDF, Image, or Text)</label>
            <input type="file" id="report-file" accept=".pdf,.jpg,.jpeg,.png,.txt" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required aria-describedby="report-file-error">
            <p id="report-file-error" class="error-message hidden"></p>
          </div>
          <div>
            <button id="report-submit" type="button" class="w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition scale-hover" aria-label="Upload Report">Upload Report</button>
          </div>
        </div>
        <p id="report-message" class="mt-4 text-center text-blue-600 hidden"></p>
        <div id="report-feedback" class="mt-4 text-center text-gray-600 hidden"></div>
      </div>
    </div>
  </section>

  <!-- Hospitals Section -->
  <section id="hospitals" class="py-16 bg-blue-50">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center text-gray-800 mb-8 fade-in">Partner Hospitals</h2>
      <div class="fade-in max-w-lg mx-auto mb-8">
        <input id="hospital-search" type="text" placeholder="Search hospitals by city..." class="w-full border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" aria-label="Search hospitals">
      </div>
      <div id="hospital-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
    </div>
  </section>

  <!-- Law Section -->
  <section id="law" class="py-16 bg-white">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center text-gray-800 mb-8 fade-in">Organ Donation Laws</h2>
      <div class="fade-in max-w-3xl mx-auto text-center">
        <p class="text-gray-600 bg-blue-50 p-6 sm:p-8 rounded-lg shadow-md scale-hover">Organ donation is regulated to ensure ethical practices. In the U.S., the Uniform Anatomical Gift Act governs donation, protecting your rights as a donor. Learn more through your state’s health department.</p>
        <a href="https://www.organdonor.gov" target="_blank" class="mt-6 inline-block bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition scale-hover" aria-label="Learn More About Organ Donation Laws">Learn More</a>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="py-16 bg-blue-50">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center text-gray-800 mb-8 fade-in">Contact Us</h2>
      <div class="fade-in max-w-lg mx-auto">
        <div id="contact-form" class="space-y-6 bg-white p-6 sm:p-8 rounded-lg shadow-md">
          <div>
            <label for="name" class="block text-sm font-medium text-gray-700">Name</label>
            <input type="text" id="name" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 input-focus" required aria-describedby="name-error">
            <p id="name-error" class="error-message hidden"></p>
          </div>
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
            <input type="email" id="email" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 input-focus" required aria-describedby="email-error">
            <p id="email-error" class="error-message hidden"></p>
          </div>
          <div>
            <label for="message" class="block text-sm font-medium text-gray-700">Message</label>
            <textarea id="message" rows="4" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 input-focus" required aria-describedby="message-error"></textarea>
            <p id="message-error" class="error-message hidden"></p>
            <p id="char-count" class="text-sm text-gray-500 mt-1">0/500 characters</p>
          </div>
          <div class="flex space-x-4">
            <button id="submit-btn" type="button" class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition scale-hover flex items-center justify-center" aria-label="Send Message">
              <span id="submit-text">Send Message</span>
              <span id="submit-spinner" class="spinner hidden"></span>
            </button>
            <button id="reset-btn" type="button" class="flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400 transition scale-hover" aria-label="Reset Form">Reset</button>
          </div>
        </div>
        <div id="form-message" class="mt-4 text-center form-message flex items-center justify-center space-x-2 hidden">
          <svg id="form-icon" class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"></svg>
          <span id="form-message-text"></span>
        </div>
        <div class="mt-6 flex justify-center space-x-4">
          <a href="https://twitter.com/amcares" target="_blank" class="text-blue-600 hover:text-blue-800" aria-label="Follow us on Twitter">
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
              <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
            </svg>
          </a>
          <a href="https://facebook.com/amcares" target="_blank" class="text-blue-600 hover:text-blue-800" aria-label="Follow us on Facebook">
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2.04c-5.523 0-10 4.477-10 10 0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54v-2.891h2.54V9.845c0-2.507 1.493-3.89 3.776-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562v1.878h2.773l-.443 2.891h-2.33v6.988c4.78-.75 8.437-4.887 8.437-9.878 0-5.523-4.477-10-10-10z"/>
            </svg>
          </a>
          <a href="https://instagram.com/amcares" target="_blank" class="text-blue-600 hover:text-blue-800" aria-label="Follow us on Instagram">
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.326 3.608 1.301.975.975 1.24 2.242 1.301 3.608.058 1.265.07 1.645.07 4.849s-.012 3.584-.07 4.85c-.062 1.366-.326 2.633-1.301 3.608-.975.975-2.242 1.24-3.608 1.301-1.265.058-1.645.07-4.849.07s-3.584-.012-4.85-.07c-1.366-.062-2.633-.326-3.608-1.301-.975-.975-1.24-2.242-1.301-3.608-.058-1.265-.07-1.645-.07-4.849s.012-3.584.07-4.85c.062-1.366.326-2.633 1.301-3.608.975-.975 2.242-1.24 3.608-1.301 1.265-.058 1.645-.07 4.849-.07zm0-2.163c-3.259 0-3.667.014-4.947.072-1.657.075-3.272.477-4.486 1.691-1.214 1.214-1.616 2.829-1.691 4.486-.058 1.28-.072 1.688-.072 4.947s.014 3.667.072 4.947c.075 1.657.477 3.272 1.691 4.486 1.214 1.214 2.829 1.616 4.486 1.691 1.28.058 1.688.072 4.947.072s3.667-.014 4.947-.072c1.657-.075 3.272-.477 4.486-1.691 1.214-1.214 1.616-2.829 1.691-4.486.058-1.28.072-1.688.072-4.947s-.014-3.667-.072-4.947c-.075-1.657-.477-3.272-1.691-4.486-1.214-1.214-2.829-1.616-4.486-1.691-1.28-.058-1.688-.072-4.947-.072z"/>
              <path d="M12 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zm0 10.162a4 4 0 110-8 4 4 0 010 8z"/>
              <circle cx="18.406" cy="5.594" r="1.44"/>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- My Story Section (Carousel) -->
  <section id="my-story" class="py-16 bg-white">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-center text-gray-800 mb-8 fade-in">Share Your Story</h2>
      <div class="fade-in max-w-lg mx-auto mb-8">
        <div class="flex space-x-4 mb-6">
          <button onclick="showModal('personal-story')" class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition scale-hover" aria-label="Read My Story">Read My Story</button>
          <button onclick="showAllStories()" class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition scale-hover" aria-label="View All Stories">View All Stories</button>
        </div>
        <div id="story-form" class="space-y-6 bg-blue-50 p-6 sm:p-8 rounded-lg shadow-md">
          <div>
            <label for="story-name" class="block text-sm font-medium text-gray-700">Your Name</label>
            <input type="text" id="story-name" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required aria-describedby="story-name-error">
            <p id="story-name-error" class="error-message hidden"></p>
          </div>
          <div>
            <label for="story-text" class="block text-sm font-medium text-gray-700">Your Story</label>
            <textarea id="story-text" rows="4" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required aria-describedby="story-text-error"></textarea>
            <p id="story-text-error" class="error-message hidden"></p>
          </div>
          <div>
            <button id="story-submit" type="button" class="w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition scale-hover flex items-center justify-center" aria-label="Submit Story">
              <span id="story-submit-text">Submit Story</span>
              <span id="story-submit-spinner" class="spinner hidden"></span>
            </button>
          </div>
        </div>
        <p id="story-message" class="mt-4 text-center text-blue-600 hidden"></p>
      </div>
      <div class="fade-in max-w-3xl mx-auto relative">
        <div id="carousel" class="overflow-hidden">
          <div id="carousel-slides" class="flex">
            <div class="carousel-slide min-w-full bg-blue-50 p-6 sm:p-8 rounded-lg shadow-md scale-hover">
              <p class="text-gray-600 italic mb-4">"Donating a kidney to my sister was the best decision I ever made. AMCARES guided us every step of the way."</p>
              <p class="text-blue-600 font-semibold">– Emily R.</p>
            </div>
            <div class="carousel-slide min-w-full bg-blue-50 p-6 sm:p-8 rounded-lg shadow-md scale-hover">
              <p class="text-gray-600 italic mb-4">"Receiving a heart transplant gave me a second chance at life. I'm forever grateful to my donor."</p>
              <p class="text-blue-600 font-semibold">– Michael T.</p>
            </div>
          </div>
        </div>
        <button id="prev-slide" class="absolute top-1/2 left-0 transform -translate-y-1/2 bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700" aria-label="Previous Slide">←</button>
        <button id="next-slide" class="absolute top-1/2 right-0 transform -translate-y-1/2 bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700" aria-label="Next Slide">→</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-blue-600 text-white py-10">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 text-center sm:text-left">
        <div>
          <h3 class="text-lg font-semibold mb-4">AMCARES</h3>
          <p class="text-blue-100 text-sm">Promoting medical awareness to save lives.</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-4">Links</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="#home" class="text-blue-100 hover:text-white" aria-label="Home">Home</a></li>
            <li><a href="#about" class="text-blue-100 hover:text-white" aria-label="About">About</a></li>
            <li><a href="#organ-donation" class="text-blue-100 hover:text-white" aria-label="Organ Donation">Organ Donation</a></li>
            <li><a href="#register" class="text-blue-100 hover:text-white" aria-label="Register">Register</a></li>
            <li><a href="#report-upload" class="text-blue-100 hover:text-white" aria-label="Upload Report">Upload Report</a></li>
            <li><a href="#contact" class="text-blue-100 hover:text-white" aria-label="Contact">Contact</a></li>
            <li><a href="#my-story" onclick="showModal('personal-story'); return false;" class="text-blue-100 hover:text-white" aria-label="My Story">My Story</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-4">Contact</h3>
          
          <p class="text-blue-100 text-sm">Email: amcareshealthorganization@gmail.com</p>
          <button id="reset-personalization" class="mt-4 bg-blue-800 text-white px-4 py-2 rounded-md hover:bg-blue-900" aria-label="Reset Personalization">Reset Personalization</button>
        </div>
      </div>
      <p class="text-center text-blue-100 text-sm mt-10">© 2025 AMCARES. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // State Management
    const state = {
      currentSlide: 0,
      totalSlides: document.querySelectorAll('.carousel-slide').length,
      chatbotMessages: JSON.parse(localStorage.getItem('chatbotMessages')) || [],
      isChatbotOpen: false,
      personalization: localStorage.getItem('personalization') || null,
      stories: JSON.parse(localStorage.getItem('stories')) || [
        { name: 'Shruti R.', text: 'Donating a kidney to my sister was the best decision I ever made. AMCARES guided us every step of the way.', status: 'approved' },
        { name: 'Ritesh k.', text: 'Receiving a liver transplant gave me a second chance at life. I’m forever grateful to my donor.', status: 'approved' }
      ],
      currentStoryPage: 0,
      storiesPerPage: 3,
      modalContent: {
        faqs: `
          <h4 class="text-lg font-semibold mb-2">Frequently Asked Questions</h4>
          <div class="accordion-item">
            <button class="accordion-toggle w-full text-left font-medium text-gray-700" aria-expanded="false">Who can donate?</button>
            <div class="hidden text-gray-600 mt-2">Anyone can register to be an organ donor, regardless of age or medical history. Eligibility is determined at the time of death.</div>
          </div>
          <div class="accordion-item">
            <button class="accordion-toggle w-full text-left font-medium text-gray-700" aria-expanded="false">Does donation affect funerals?</button>
            <div class="hidden text-gray-600 mt-2">Organ donation is performed with respect and does not interfere with open-casket funerals.</div>
          </div>
        `,
        'myths-facts': `
          <h4 class="text-lg font-semibold mb-2">Myths & Facts</h4>
          <p class="text-gray-600 mb-2"><strong>Myth:</strong> Doctors won't save donors.</p>
          <p class="text-gray-600 mb-2"><strong>Fact:</strong> Doctors prioritize saving lives, and donation is only considered after death is confirmed.</p>
          <p class="text-gray-600 mb-2"><strong>Myth:</strong> Donation is against my religion.</p>
          <p class="text-gray-600"><strong>Fact:</strong> Most major religions support organ donation as an act of charity.</p>
        `,
        'signup-process': `
          <h4 class="text-lg font-semibold mb-2">Sign Up Process</h4>
          <p class="text-gray-600">Registering as a donor or volunteer with AMCARES is simple. Fill out the registration form, consent if registering as a donor, and submit. You'll receive a confirmation and further details via email.</p>
        `,
        'types-donation': `
          <h4 class="text-lg font-semibold mb-2">Types of Donation</h4>
          <p class="text-gray-600 mb-2">1. <strong>Living Donation:</strong> Donate organs like a kidney or liver while alive.</p>
          <p class="text-gray-600 mb-2">2. <strong>Deceased Donation:</strong> Donate organs or tissues after death.</p>
          <p class="text-gray-600">3. <strong>Tissue Donation:</strong> Donate tissues like corneas or skin.</p>
        `,
        'personal-story': `
          <p class="text-gray-600 mb-4">My name is <strong>Shreya Srivastava</strong>, a software developer and the founder of AMCARES. Beyond my love for technology, I want to share a deeply personal journey that shaped my life and inspired this organization.</p>
          <p class="text-gray-600 mb-4">On May 21, 2018, my family was celebrating my parents’ anniversary, filled with joy. But the next day, my father fell seriously ill. At a hospital in Prayagraj, doctors diagnosed him with liver cirrhosis, revealing fluid accumulation in his liver. Despite five days of treatment, his condition worsened, and we were referred to PGI Lucknow, where we received devastating news: liver cancer. A liver transplant was his only hope, with just six months left, according to the doctors.</p>
          <p class="text-gray-600 mb-4">As a 17-year-old, I faced unimaginable grief but held onto faith. Determined to save my father, I searched for India’s best liver surgeon, visiting top hospitals across the country. At Max Hospital in Saket, Delhi, we met Dr. Subash Gupta, who gave us hope by confirming a transplant could work.</p>
          <p class="text-gray-600 mb-4">Finding a donor was our next challenge. My mother volunteered but didn’t qualify. No family member stepped forward, so I decided to donate my liver. Despite my parents’ objections, I underwent rigorous testing, complicated by our mismatched blood groups (AB+ for me, B+ for my father). After four months of preparation, including immunosuppressive treatments for my father, we were ready.</p>
          <p class="text-gray-600 mb-4">On September 5, 2018, at 2 a.m., the transplant was scheduled. By 5 a.m., I was prepared for surgery, hugging my parents tightly. My 16-hour surgery and my father’s 20-hour procedure were intense, but when I woke, Dr. Gupta assured me, <em>“The operation was successful.”</em> Relief washed over me.</p>
          <p class="text-gray-600 mb-4">After 16 days in the hospital for me and 25 for my father, we returned to Prayagraj with renewed hope. Eight years later, my father thrives, and I pray for his health daily. This journey taught me that with faith, skilled doctors, and family love, even cancer can be overcome.</p>
          <p class="text-gray-600 mb-4">This experience inspired AMCARES, a platform to support families facing similar challenges and promote organ donation. Thank you for reading my story. Let’s work together to save lives.</p>
          <p class="text-blue-600 font-semibold">– Shreya Srivastava</p>
        `
      }
    };

    // Utility Functions
    const $ = (selector) => document.querySelector(selector);
    const $$ = (selector) => document.querySelectorAll(selector);

    // Mock Analytics
    const trackEvent = (event, data) => {
      console.log(`[Analytics] ${event}:`, data);
    };

    // Navigation
    const initNavigation = () => {
      $('#menu-toggle').addEventListener('click', () => {
        const isOpen = !$('#mobile-menu').classList.contains('hidden');
        $('#mobile-menu').classList.toggle('hidden');
        $('#menu-toggle').setAttribute('aria-expanded', !isOpen);
        trackEvent('menu_toggle', { open: !isOpen });
      });

      $$('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', (e) => {
          const href = anchor.getAttribute('href');
          if (href === '#my-story' && !anchor.onclick) {
            e.preventDefault();
            $('#my-story').scrollIntoView({ behavior: 'smooth' });
            trackEvent('section_nav', { section: 'my-story' });
          }
        });
      });

      // Dropdown keyboard accessibility
      $$('.dropdown').forEach(dropdown => {
        const button = dropdown.querySelector('a[role="button"]');
        const menu = dropdown.querySelector('.dropdown-menu');
        button.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            menu.classList.toggle('hidden');
            button.setAttribute('aria-expanded', !menu.classList.contains('hidden'));
          }
        });
      });
    };

    // Fade-in Animation
    const initFadeIn = () => {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.1 });

      $$('.fade-in').forEach(element => observer.observe(element));
    };

    // Personalization
    window.personalize = (interest) => {
      state.personalization = interest;
      localStorage.setItem('personalization', interest);
      $('#personalization-modal').classList.add('hidden');
      $('#personalization-modal').setAttribute('aria-hidden', 'true');
      const section = interest === 'donor' ? '#register' : interest === 'volunteer' ? '#register-volunteer' : '#my-story';
      $(section).scrollIntoView({ behavior: 'smooth' });
      if (section === '#my-story') {
        showModal('personal-story');
      }
      applyPersonalization();
      trackEvent('personalization_selected', { interest });
    };

    const applyPersonalization = () => {
      if (state.personalization) {
        const section = state.personalization === 'donor' ? '#register' : state.personalization === 'volunteer' ? '#register-volunteer' : '#my-story';
        const element = $(section);
        if (element) {
          element.classList.add('border-2', 'border-blue-600', 'p-4', 'rounded-lg');
          setTimeout(() => element.classList.remove('border-2', 'border-blue-600', 'p-4', 'rounded-lg'), 3000);
        }
      }
    };

    $('#reset-personalization').addEventListener('click', () => {
      localStorage.removeItem('personalization');
      state.personalization = null;
      $('#personalization-modal').classList.remove('hidden');
      $('#personalization-modal').setAttribute('aria-hidden', 'false');
      trackEvent('personalization_reset', {});
    });

    // Modal Management
    window.showModal = (type) => {
      const isPersonalStory = type === 'personal-story';
      const modal = isPersonalStory ? $('#personal-story-modal') : $('#organ-donation-modal');
      const title = isPersonalStory ? $('#personal-story-title') : $('#modal-title');
      const content = isPersonalStory ? $('#personal-story-content') : $('#modal-content');

      title.textContent = type === 'personal-story' ? 'My Story' : type.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
      content.innerHTML = state.modalContent[type];
      modal.classList.remove('hidden');
      modal.setAttribute('aria-hidden', 'false');

      if (!isPersonalStory) {
        $$('.accordion-toggle').forEach(button => {
          button.addEventListener('click', () => {
            const content = button.nextElementSibling;
            const isExpanded = button.getAttribute('aria-expanded') === 'true';
            button.setAttribute('aria-expanded', !isExpanded);
            content.classList.toggle('hidden');
            trackEvent('accordion_toggle', { item: button.textContent, expanded: !isExpanded });
          });
        });
      }
      trackEvent('modal_open', { type });
    };

    $('#modal-close').addEventListener('click', () => {
      $('#organ-donation-modal').classList.add('hidden');
      $('#organ-donation-modal').setAttribute('aria-hidden', 'true');
      trackEvent('modal_close', { type: 'organ-donation' });
    });

    $('#personal-story-close').addEventListener('click', () => {
      $('#personal-story-modal').classList.add('hidden');
      $('#personal-story-modal').setAttribute('aria-hidden', 'true');
      trackEvent('modal_close', { type: 'personal-story' });
    });

    $('#personalization-close').addEventListener('click', () => {
      $('#personalization-modal').classList.add('hidden');
      $('#personalization-modal').setAttribute('aria-hidden', 'true');
      trackEvent('modal_close', { type: 'personalization' });
    });

    $('#all-stories-close').addEventListener('click', () => {
      $('#all-stories-modal').classList.add('hidden');
      $('#all-stories-modal').setAttribute('aria-hidden', 'true');
      trackEvent('modal_close', { type: 'all-stories' });
    });

    // All Stories Modal
    window.showAllStories = () => {
      state.currentStoryPage = 0;
      renderStories();
      $('#all-stories-modal').classList.remove('hidden');
      $('#all-stories-modal').setAttribute('aria-hidden', 'false');
      trackEvent('modal_open', { type: 'all-stories' });
    };

    const renderStories = () => {
      const start = state.currentStoryPage * state.storiesPerPage;
      const end = start + state.storiesPerPage;
      const approvedStories = state.stories.filter(s => s.status === 'approved');
      const paginatedStories = approvedStories.slice(start, end);

      $('#all-stories-content').innerHTML = paginatedStories.map(story => `
        <div class="bg-blue-50 p-4 rounded-lg mb-4">
          <p class="text-gray-600 italic mb-2">"${story.text}"</p>
          <p class="text-blue-600 font-semibold">– ${story.name}</p>
        </div>
      `).join('');

      $('#stories-prev').disabled = state.currentStoryPage === 0;
      $('#stories-next').disabled = end >= approvedStories.length;
    };

    $('#stories-prev').addEventListener('click', () => {
      if (state.currentStoryPage > 0) {
        state.currentStoryPage--;
        renderStories();
        trackEvent('stories_page', { page: state.currentStoryPage });
      }
    });

    $('#stories-next').addEventListener('click', () => {
      if ((state.currentStoryPage + 1) * state.storiesPerPage < state.stories.filter(s => s.status === 'approved').length) {
        state.currentStoryPage++;
        renderStories();
        trackEvent('stories_page', { page: state.currentStoryPage });
      }
    });

    // Chatbot
    const chatbotResponses = {
      'founder': 'Shreya Srivastava is the founder of AMCARES, established in 2025. As a software developer, she built this platform to raise awareness about organ donation and help save lives through education and community support.',
      'shreya srivastava': 'Shreya Srivastava founded AMCARES in 2025. She is a software developer passionate about using technology to promote organ donation and support communities in making a difference.',
      'who can donate': 'Anyone can register to be an organ donor, regardless of age or medical history. Eligibility is determined at the time of death.',
      'funeral': 'Organ donation is performed with respect and does not interfere with open-casket funerals.',
      'religion': 'Most major religions support organ donation as an act of charity.',
      'amcares': 'AMCARES is a non-profit founded in 2025 by Shreya Srivastava, dedicated to promoting organ donation, educating communities, and supporting donors and recipients.',
      'organ donation': 'Organ donation involves giving organs or tissues to save or improve lives. AMCARES helps you register as a donor or volunteer and provides education on the process.',
      'how to register': 'To register as a donor or volunteer, go to the Register section, fill out the form with your name, email, and registration type, and submit. You’ll receive a confirmation email.',
      'hospitals': 'AMCARES partners with leading hospitals for organ transplants. Search our hospital list in the Hospitals section to find one near you.',
      'contact': 'You can contact AMCARES at contact@amcares.org or call (987) 654-3210. Visit the Contact section to send us a message.',
      'default': 'I’m not sure I understood your question. Try asking about the founder, AMCARES, organ donation, or how to register (e.g., "Who is the founder?", "How to register?").'
    };

    const initChatbot = () => {
      $('#chatbot-toggle').addEventListener('click', () => {
        state.isChatbotOpen = !state.isChatbotOpen;
        $('#chatbot').classList.toggle('hidden', !state.isChatbotOpen);
        $('#chatbot').setAttribute('aria-hidden', !state.isChatbotOpen);
        if (state.isChatbotOpen && !$('#chatbot-messages').children.length) {
          renderChatbotMessages();
        }
        trackEvent('chatbot_toggle', { open: state.isChatbotOpen });
      });

      $('#chatbot-clear').addEventListener('click', () => {
        state.chatbotMessages = [];
        localStorage.setItem('chatbotMessages', JSON.stringify(state.chatbotMessages));
        renderChatbotMessages();
        trackEvent('chatbot_clear', {});
      });

      $('#chatbot-send').addEventListener('click', sendMessage);
      $('#chatbot-input').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') sendMessage();
      });

      async function sendMessage() {
        const input = $('#chatbot-input').value.trim();
        if (!input) return;

        state.chatbotMessages.push({ sender: 'user', text: input });
        renderChatbotMessages();

        // Show typing indicator
        const typingDiv = document.createElement('div');
        typingDiv.className = 'typing-indicator';
        typingDiv.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
        $('#chatbot-messages').appendChild(typingDiv);
        $('#chatbot-messages').scrollTop = $('#chatbot-messages').scrollHeight;

        // Simulate bot response delay
        await new Promise(resolve => setTimeout(resolve, 1000));

        const query = input.toLowerCase().trim();
        const response = Object.keys(chatbotResponses).find(key => query.includes(key))
          ? chatbotResponses[Object.keys(chatbotResponses).find(key => query.includes(key))]
          : chatbotResponses['default'];
        state.chatbotMessages.push({ sender: 'bot', text: response });

        localStorage.setItem('chatbotMessages', JSON.stringify(state.chatbotMessages));
        typingDiv.remove();
        renderChatbotMessages();
        $('#chatbot-input').value = '';
        trackEvent('chatbot_message', { query, response });
      }

      function renderChatbotMessages() {
        $('#chatbot-messages').innerHTML = '';
        state.chatbotMessages.forEach((msg, index) => {
          const div = document.createElement('div');
          div.className = `text-${msg.sender === 'user' ? 'right' : 'left'} text-gray-${msg.sender === 'user' ? '800' : '600'} mb-2 bg-${msg.sender === 'user' ? 'blue' : 'gray'}-100 p-2 rounded-lg`;
          div.textContent = msg.sender === 'bot' && index === 0 && state.chatbotMessages.length === 1
            ? 'Hello! I’m the AMCARES Assistant. Ask me about our founder, organ donation, or AMCARES!'
            : msg.text;
          $('#chatbot-messages').appendChild(div);
        });
        $('#chatbot-messages').scrollTop = $('#chatbot-messages').scrollHeight;
      }

      if (state.chatbotMessages.length) renderChatbotMessages();
    };

    // Form Validation
    const validateField = (field, errorId, validationFn, errorMessage) => {
      const errorElement = $(`#${errorId}`);
      if (!validationFn(field)) {
        field.classList.add('error');
        errorElement.textContent = errorMessage;
        errorElement.classList.remove('hidden');
        return false;
      } else {
        field.classList.remove('error');
        errorElement.classList.add('hidden');
        return true;
      }
    };

    // Mock API Submission
    const submitToMockAPI = async (endpoint, data) => {
      try {
        const response = await fetch(`https://jsonplaceholder.typicode.com/${endpoint}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        if (!response.ok) throw new Error('Network error');
        return await response.json();
      } catch (error) {
        throw new Error('Submission failed. Please try again.');
      }
    };

    // Report Upload
    const initReportUpload = () => {
      const keywords = {
        kidney: {
          message: 'Your report mentions kidney-related information. Learn how kidney donation can save lives!',
          link: '#types-donation',
          linkText: 'Explore Kidney Donation'
        },
        liver: {
          message: 'Your report mentions liver-related information. Discover the impact of liver donation.',
          link: '#types-donation',
          linkText: 'Learn About Liver Donation'
        },
        heart: {
          message: 'Your report mentions heart-related information. Find out how heart transplants transform lives.',
          link: '#types-donation',
          linkText: 'Understand Heart Donation'
        },
        default: {
          message: 'Thank you for uploading your report. Learn more about organ donation and how you can make a difference!',
          link: '#organ-donation',
          linkText: 'Explore Organ Donation'
        }
      };

      const validateReport = () => {
        const fileInput = $('#report-file');
        const maxSize = 5 * 1024 * 1024; // 5MB
        return validateField(
          fileInput,
          'report-file-error',
          f => f.files.length > 0 && f.files[0].size <= maxSize && ['application/pdf', 'image/jpeg', 'image/png', 'text/plain'].includes(f.files[0].type),
          'Please upload a valid PDF, image, or text file (max 5MB).'
        );
      };

      $('#report-file').addEventListener('change', validateReport);

      $('#report-submit').addEventListener('click', async () => {
        if (!validateReport()) return;

        const file = $('#report-file').files[0];
        $('#report-submit').disabled = true;
        $('#report-message').textContent = 'Uploading...';
        $('#report-message').classList.remove('hidden');

        try {
          await submitToMockAPI('posts', { file: file.name });
          $('#report-message').textContent = 'Report uploaded successfully!';
          const fakeContent = file.name.toLowerCase();
          const match = Object.keys(keywords).find(key => fakeContent.includes(key)) || 'default';
          const feedback = keywords[match];
          $('#report-feedback').innerHTML = `
            <p>${feedback.message}</p>
            <a href="${feedback.link}" class="text-blue-600 hover:underline">${feedback.linkText}</a>
          `;
          $('#report-feedback').classList.remove('hidden');
          trackEvent('report_upload', { file: file.name, feedback: match });
        } catch (error) {
          $('#report-message').textContent = error.message;
          $('#report-message').classList.add('text-red-600');
        }

        $('#report-form').reset();
        $('#report-submit').disabled = false;
        setTimeout(() => {
          $('#report-message').classList.add('hidden');
          $('#report-message').classList.remove('text-red-600');
          $('#report-feedback').classList.add('hidden');
        }, 5000);
      });
    };

    // Registration Form
    const initRegistrationForm = () => {
      const fields = {
        'reg-name': () => validateField($('#reg-name'), 'reg-name-error', f => f.value.trim().length > 0, 'Name is required'),
        'reg-email': () => validateField($('#reg-email'), 'reg-email-error', f => /^\S+@\S+\.\S+$/.test(f.value), 'Valid email is required'),
        'reg-type': () => validateField($('#reg-type'), 'reg-type-error', f => f.value === 'donor' || f.value === 'volunteer', 'Please select a registration type'),
        'reg-consent': () => $('#reg-type').value === 'volunteer' || validateField($('#reg-consent'), 'reg-consent-error', f => f.checked, 'Consent is required for donors')
      };

      Object.keys(fields).forEach(id => {
        $(`#${id}`).addEventListener('input', () => {
          fields[id]();
          updateProgress();
        });
        $(`#${id}`).addEventListener('change', () => {
          fields[id]();
          updateProgress();
        });
      });

      function updateProgress() {
        const filled = Object.values(fields).filter(fn => fn()).length;
        $('#progress').style.width = `${(filled / 4) * 100}%`;
      }

      $('#reg-submit').addEventListener('click', async () => {
        const isValid = Object.values(fields).every(fn => fn());
        if (!isValid) return;

        $('#reg-submit').disabled = true;
        $('#reg-submit-text').classList.add('hidden');
        $('#reg-submit-spinner').classList.remove('hidden');
        $('#reg-message').textContent = 'Submitting...';
        $('#reg-message').classList.remove('hidden');

        try {
          const data = {
            name: $('#reg-name').value,
            email: $('#reg-email').value,
            type: $('#reg-type').value,
            consent: $('#reg-consent').checked
          };
          await submitToMockAPI('users', data);
          $('#reg-message').textContent = 'Registration successful!';
          $('#register-form').reset();
          $('#progress').style.width = '0%';
          trackEvent('registration_submit', data);
        } catch (error) {
          $('#reg-message').textContent = error.message;
          $('#reg-message').classList.add('text-red-600');
        }

        $('#reg-submit').disabled = false;
        $('#reg-submit-text').classList.remove('hidden');
        $('#reg-submit-spinner').classList.add('hidden');
        setTimeout(() => {
          $('#reg-message').classList.add('hidden');
          $('#reg-message').classList.remove('text-red-600');
        }, 3000);
      });
    };

    // Contact Form
    const initContactForm = () => {
      const fields = {
        name: () => validateField($('#name'), 'name-error', f => f.value.trim().length > 0, 'Name is required'),
        email: () => validateField($('#email'), 'email-error', f => /^\S+@\S+\.\S+$/.test(f.value), 'Valid email is required'),
        message: () => validateField($('#message'), 'message-error', f => f.value.trim().length > 0 && f.value.length <= 500, 'Message is required (max 500 characters)')
      };

      // Character count for message
      $('#message').addEventListener('input', () => {
        const count = $('#message').value.length;
        $('#char-count').textContent = `${count}/500 characters`;
        $('#char-count').className = `text-sm mt-1 ${count > 500 ? 'text-red-500' : 'text-gray-500'}`;
        fields.message();
      });

      Object.keys(fields).forEach(id => {
        $(`#${id}`).addEventListener('input', fields[id]);
      });

      // Submit button with loading state
      $('#submit-btn').addEventListener('click', () => {
        const isValid = Object.values(fields).every(fn => fn());
        if (!isValid) {
          $('#form-message').classList.remove('hidden');
          $('#form-message').classList.add('show');
          $('#form-message').classList.add('text-red-600');
          $('#form-message-text').textContent = 'Please fix the errors in the form.';
          $('#form-icon').innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>';
          setTimeout(() => {
            $('#form-message').classList.remove('show');
            $('#form-message').classList.add('hidden');
          }, 3000);
          return;
        }

        $('#submit-btn').disabled = true;
        $('#submit-text').classList.add('hidden');
        $('#submit-spinner').classList.remove('hidden');

        // Simulate form submission
        setTimeout(() => {
          $('#submit-btn').disabled = false;
          $('#submit-text').classList.remove('hidden');
          $('#submit-spinner').classList.add('hidden');
          $('#form-message').classList.remove('hidden');
          $('#form-message').classList.add('show');
          $('#form-message').classList.add('text-blue-600');
          $('#form-message-text').textContent = 'Message sent successfully!';
          $('#form-icon').innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>';
          $('#contact-form').reset();
          $('#char-count').textContent = '0/500 characters';
          setTimeout(() => {
            $('#form-message').classList.remove('show');
            $('#form-message').classList.add('hidden');
          }, 3000);
        }, 1500);
      });

      // Reset button
      $('#reset-btn').addEventListener('click', () => {
        if (confirm('Are you sure you want to reset the form? All entered data will be lost.')) {
          $('#contact-form').reset();
          $('#char-count').textContent = '0/500 characters';
          Object.keys(fields).forEach(id => fields[id]());
          $('#form-message').classList.remove('show');
          $('#form-message').classList.add('hidden');
        }
      });
    };

    // Story Form
    const initStoryForm = () => {
      const fields = {
        'story-name': () => validateField($('#story-name'), 'story-name-error', f => f.value.trim().length > 0, 'Name is required'),
        'story-text': () => validateField($('#story-text'), 'story-text-error', f => f.value.trim().length > 0, 'Story is required')
      };

      Object.keys(fields).forEach(id => {
        $(`#${id}`).addEventListener('input', fields[id]);
      });

      $('#story-submit').addEventListener('click', () => {
        const isValid = Object.values(fields).every(fn => fn());
        if (isValid) {
          const name = $('#story-name').value;
          const text = $('#story-text').value;
          const newSlide = document.createElement('div');
          newSlide.className = 'carousel-slide min-w-full bg-blue-50 p-6 rounded-lg shadow-md scale-hover';
          newSlide.innerHTML = `<p class="text-gray-600 italic mb-4">"${text}"</p><p class="text-blue-600 font-semibold">– ${name}</p>`;
          $('#carousel-slides').appendChild(newSlide);

          $('#story-message').classList.remove('hidden');
          $('#story-form').reset();
          setTimeout(() => $('#story-message').classList.add('hidden'), 3000);

          state.totalSlides = $$('.carousel-slide').length;
        }
      });
    };

    // Carousel
    const initCarousel = () => {
      const updateCarousel = () => {
        $('#carousel-slides').style.transform = `translateX(-${state.currentSlide * 100}%)`;
      };

      $('#next-slide').addEventListener('click', () => {
        state.currentSlide = (state.currentSlide + 1) % state.totalSlides;
        updateCarousel();
      });

      $('#prev-slide').addEventListener('click', () => {
        state.currentSlide = (state.currentSlide - 1 + state.totalSlides) % state.totalSlides;
        updateCarousel();
      });

      setInterval(() => {
        state.currentSlide = (state.currentSlide + 1) % state.totalSlides;
        updateCarousel();
      }, 5000);
    };

    // Keyboard Accessibility
    const initAccessibility = () => {
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          $('#organ-donation-modal').classList.add('hidden');
          $('#organ-donation-modal').setAttribute('aria-hidden', 'true');
          $('#personal-story-modal').classList.add('hidden');
          $('#personal-story-modal').setAttribute('aria-hidden', 'true');
          if (state.isChatbotOpen) {
            state.isChatbotOpen = false;
            $('#chatbot').classList.add('hidden');
            $('#chatbot').setAttribute('aria-hidden', 'true');
          }
        }
      });

      $('#chatbot-input').addEventListener('focus', () => {
        if (!state.isChatbotOpen) {
          state.isChatbotOpen = true;
          $('#chatbot').classList.remove('hidden');
          $('#chatbot').setAttribute('aria-hidden', 'false');
          renderChatbotMessages();
        }
      });
    };

    // Initialize
    window.addEventListener('load', () => {
      $('#personalization-modal').classList.remove('hidden');
      initNavigation();
      initFadeIn();
      initChatbot();
      initRegistrationForm();
      initContactForm();
      initStoryForm();
      initCarousel();
      initReportUpload();
      initAccessibility();
    });
  </script>
</body>
</html>
